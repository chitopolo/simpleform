<html>
<head>
    <meta charset="utf-8">
    <title>Daniel munoz Project</title>
    <link rel="stylesheet" href="css/bootstrap.min.css" >
</head>
<body class="container">
    <div class="col-md-5">
        <input class="form-control searchField" placeholder="Buscar nuevo paciente"/>
        <button class="searchNow btn btn-primary">Buscar</button>
        <a href="createPatient.html"><button class="addNew btn btn-primary">AÃ±adir nuevo paciente</button></a>
        <div id="info"></div>
    </div>
<script src="js/jquery.js"></script>

<script>
    $('.searchNow').on('click', function(){
    var term = $('.searchField').val()
    var PathToURL = "http://10.0.1.12:3000/api/findPatient/"+term
        $('#info').empty()
        $.ajax({
              type: 'GET',
              url: PathToURL,
              dataType: 'jsonp',
              success: function(data) {
                console.log(data)
                var patients = data.Patients;
                patients.forEach(function(value){
                    console.log("Item:", value)
                 $('#info')
                 .append($('<h4>').text(value.firstName.toString() + " " + value.lastName.toString()))
                 .append($('<a/>', {
                    text: 'Link',
                    class:'btn btn-primary',
                    href: 'laboratory.html?id='+value.id.toString()
                 }))
                 .append($('<button/>', {
                                text: 'Seleccionar', //set text 1 to 10
                                id: value.id.toString(),
                                class:'btn btn-primary'
                        })
                 )
                    
                })
              },
              
           });

    });

</script>
</body>
</html>